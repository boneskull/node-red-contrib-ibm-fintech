<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-tagsinput/1.3.6/jquery.tagsinput.min.js"></script>

<script>
  (function () {
    'use strict';

    var TAGS_INPUT_OPTIONS = {
      height: '34px',
      width: '70%',
      defaultText: '(add key)',
      placeholderColor: '#bbb'
    };

    RED.nodes.registerType('holdings-read', {
      category: 'IBM FinTech',
      defaults: {
        name: {
          value: null
        },
        service: {
          type: 'investment-portfolio'
        },
        portfolioName: {
          value: ''
        },
        date: {
          value: null
        },
        time: {
          value: null
        },
        hasKey: {
          value: ''
        },
        latest: {
          value: false
        }
      },
      inputs: 1,
      outputs: 1,
      color: '#85bb65',
      paletteLabel: 'holdings',
      label: function () {
        return this.name || this.portfolioName || 'holdings';
      },
      icon: 'holdings.png',
      oneditprepare: function () {
        $('#node-input-hasKey').tagsInput(TAGS_INPUT_OPTIONS);
      }
    });
  }());
</script>

<script type="text/x-red" data-template-name="holdings-read">
  <style>
    #holdings-read-wrapper .tagsinput {
      display: inline-block;
      margin-bottom: 0;
      vertical-align: middle;
      border: 1px solid #ccc;
      box-shadow: inset 0 1px 1px rgba(0,0,0,0.075); 
      border-radius: 4px;
      padding: 4px;
      box-sizing: border-box;
    }
    #holdings-read-wrapper .tagsinput > div {
      display: inline-block;
    }
    #holdings-read-wrapper .tagsinput > div > input {
      border: none;
    }
    #holdings-read-wrapper .tagsinput span.tag {
      display: inline-block;
      border: 1px solid #ccc;
      background: #eee;
      border-radius: 4px;
      padding: 0 2px 0 2px;
      margin: 1px 4px 1px 0;
    }
    #holdings-read-wrapper .tagsinput span.tag a {
      font-weight: bold;
      color: #999;
      text-decoration: none;
    }
    #holdings-read-wrapper .tagsinput span.tag a:hover {
      color: crimson;
      text-decoration: none;
    }
  </style>
  <div id="holdings-read-wrapper">
    <div class="form-row">
      <label for="node-input-service"><i class="fa fa-bookmark"></i> Service</label>
      <input type="text" id="node-input-service"/>
    </div>
    <div class="form-row">
      <label for="node-input-portfolioName"><i class="fa fa-book"></i> Portfolio</label>
      <input type="text" id="node-input-portfolioName" placeholder="(from message)"/>
    </div>
    <div class="form-row">
      <label for="node-input-date"><i class="fa fa-calendar"></i> After Date</label>
      <input type="date" id="node-input-date"/>
    </div>
    <div class="form-row">
      <label for="node-input-time"><i class="fa fa-clock-o"></i> Time</label>
      <input type="time" id="node-input-time"/>
    </div>
    <div class="form-row">
      <label for="node-input-hasKey"><i class="fa fa-key"></i> Has Key(s)</label>
      <input type="text" id="node-input-hasKey"/>
    </div>
    <div class="form-row">
      <label for="node-input-latest"><i class="fa fa-asterisk"></i> Latest?</label>
      <input type="checkbox" id="node-input-latest" />
    </div>
    <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name"/>
    </div>
  </div>
</script>
